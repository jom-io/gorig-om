import{s as z,aF as M,T as P,aG as A,j as s,b as l,aA as F,aH as V,C as f}from"./index-Cr9X0c_l.js";import{r as i}from"./vendor-core-Cler3e7Q.js";import{K as B,T as G}from"./kanban-task-BOdSry0N.js";import{I as y,D as H,i as h}from"./vendor-ui-Bdifwvp0.js";function J(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];t&&t.addEventListener&&t.addEventListener.apply(t,n)}function q(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];t&&t.removeEventListener&&t.removeEventListener.apply(t,n)}var Q=typeof window<"u",U=Q?window:null,k=function(t){return!!t.addEventListener},v=function(t){return!!t.on},W=function(t,n,e,a){e===void 0&&(e=U),i.useEffect(function(){if(n&&e)return k(e)?J(e,t,n,a):v(e)&&e.on(t,n,a),function(){k(e)?q(e,t,n,a):v(e)&&e.off(t,n,a)}},[t,n,e,JSON.stringify(a)])};function X({id:t,column:n,tasks:e,createTask:a,clearColumn:p,deleteColumn:m,renameColumn:b,isDragging:j}){const{themeMode:T}=z(),{attributes:w,listeners:N,setNodeRef:S,transform:C,transition:E}=M({id:t}),L={transform:A.Transform.toString(C),transition:E,height:"100%",padding:"16px",borderRadius:"16px",backgroundColor:T===P.Light?"rgb(244, 246, 248)":"rgba(145, 158, 171, 0.12)",opacity:j?.5:1},R=[{key:"1",label:s.jsxs("div",{className:"flex items-center text-gray",onClick:()=>{u(!0)},onKeyDown:r=>{r.key==="Enter"&&u(!0)},children:[s.jsx(l,{icon:"solar:pen-bold"}),s.jsx("span",{className:"ml-2",children:"rename"})]})},{key:"2",label:s.jsxs("div",{className:"flex items-center text-gray",onClick:()=>p(n.id),onKeyDown:r=>{r.key==="Enter"&&p(n.id)},children:[s.jsx(l,{icon:"solar:eraser-bold"}),s.jsx("span",{className:"ml-2",children:"clear"})]})},{key:"3",label:s.jsxs("div",{className:"flex items-center text-warning",onClick:()=>m(n.id),onKeyDown:r=>{r.key==="Enter"&&m(n.id)},children:[s.jsx(l,{icon:"solar:trash-bin-trash-bold"}),s.jsx("span",{className:"ml-2",children:"delete"})]})}],[I,x]=i.useState(!1),c=i.useRef(null);W("click",r=>{if(c.current&&!c.current.input?.contains(r.target)){const o=c.current.input?.value;o&&a(n.id,{id:f.string.uuid(),title:o,reporter:f.image.avatarGitHub(),priority:f.helpers.enumValue(G)}),x(!1)}if(d.current&&!d.current.input?.contains(r.target)){const o=d.current.input?.value;o&&b({...n,title:o}),u(!1)}});const[O,u]=i.useState(!1),d=i.useRef(null),[K,g]=i.useState(!1),D=r=>{g(!1),r.domEvent.stopPropagation()};return s.jsxs("div",{ref:S,style:L,children:[s.jsxs("header",{...w,...N,className:"mb-4 flex select-none items-center justify-between text-base font-semibold",children:[O?s.jsx(y,{ref:d,size:"large",autoFocus:!0}):n.title,s.jsx(H,{open:K,onOpenChange:r=>g(r),menu:{items:R,onClick:D},placement:"bottomRight",trigger:["click"],children:s.jsx(h,{shape:"circle",type:"text",className:"!text-gray",children:s.jsx(l,{icon:"dashicons:ellipsis"})})})]}),s.jsx(F,{items:e.map(r=>r.id),strategy:V,children:s.jsx("div",{className:"min-h-[10px]",children:e.map(r=>s.jsx(B,{id:r.id,task:r},r.id))})}),s.jsx("footer",{className:"w-[248px]",children:I?s.jsx(y,{ref:c,size:"large",placeholder:"Task Name",autoFocus:!0}):s.jsxs(h,{onClick:r=>{r.stopPropagation(),x(!0)},className:"!flex items-center justify-center !text-xs !font-medium",type:"text",block:!0,size:"large",children:[s.jsx(l,{icon:"carbon:add",size:20}),s.jsx("span",{children:"Add Task"})]})})]})}const se=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as K,se as k,W as u};
