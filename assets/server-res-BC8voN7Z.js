import{u as N,a as F,j as e,t as U,b as R}from"./index-Cnre7JAL.js";import{h as v,R as M}from"./resource-chart-D-omSYum.js";import{C as H}from"./index-DO62cgX-.js";import{r as l}from"./vendor-core-D3G3Pc5t.js";import{c as f,ai as A}from"./vendor-ui-Dp3kvFmo.js";import"./vendor-utils-DKy5dUqm.js";import"./useChart-Sd_3clJh.js";import"./vendor-charts-C0vSEv4L.js";import"./api-latency-chart-DkVkODiG.js";import"./api-sample-modal-BSW25iFI.js";function Q(){const{t:s}=N(),i=F(),[t,m]=l.useState(null),[d,p]=l.useState(!1);if(l.useEffect(()=>{i&&v.getCachedUsage(1,1).then(o=>{o.items.length>0&&m(o.items[0])})},[i]),!t)return e.jsx(y,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:8,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}});const r=Math.max(Number(t.appCpu),.01),a=Math.max(Number(t.cpu),.01);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>p(!0),style:{cursor:"pointer"},children:e.jsx(y,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:Number(t.cpuNum),usedValue:0,appValue:"0",usedPercent:Number.parseFloat(a.toFixed(2)),appPercent:Number.parseFloat(r.toFixed(2)),showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}})}),e.jsx(M,{open:d,onClose:()=>p(!1),resourceType:"cpu"})]})}function W(){const{t:s}=N(),i=F(),[t,m]=l.useState(null),[d,p]=l.useState(!1);if(l.useEffect(()=>{i&&v.getCachedUsage(1,1).then(u=>{u.items.length>0&&m(u.items[0])})},[i]),!t)return e.jsx(y,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:16,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}});const r=Number(t.totalMem),a=Number(t.mem),o=Number(t.appMem),g=r/1024,x=a/1024,n=Math.max(o/r*100,.01),k=Math.max(a/r*100,.01),b=o>=1024?(o/1024).toFixed(1):o.toFixed(0),w=o>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>p(!0),style:{cursor:"pointer"},children:e.jsx(y,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(g.toFixed(1)),usedValue:Number.parseFloat(x.toFixed(1)),appValue:String(b),usedPercent:Number.parseFloat(k.toFixed(2)),appPercent:Number.parseFloat(n.toFixed(2)),showAppUsage:!0,appUnit:w,tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}})}),e.jsx(M,{open:d,onClose:()=>p(!1),resourceType:"memory"})]})}function X(){const{t:s}=N(),i=F(),[t,m]=l.useState(null),[d,p]=l.useState(!1);if(l.useEffect(()=>{i&&v.getCachedUsage(1,1).then(u=>{u.items.length>0&&m(u.items[0])})},[i]),!t)return e.jsx(y,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:500,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}});const r=Number(t.totalDisk),a=Number(t.disk),o=Number(t.appDisk),g=r/1024,x=a/1024,n=Math.max(o/r*100,.01),k=Math.max(a/r*100,.01),b=o>=1024?(o/1024).toFixed(1):o.toFixed(0),w=o>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>p(!0),style:{cursor:"pointer"},children:e.jsx(y,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(g.toFixed(1)),usedValue:Number.parseFloat(x.toFixed(1)),appValue:String(b),usedPercent:Number.parseFloat(k.toFixed(2)),appPercent:Number.parseFloat(n.toFixed(2)),showAppUsage:!0,appUnit:w,tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}})}),e.jsx(M,{open:d,onClose:()=>p(!1),resourceType:"disk"})]})}function y({title:s,iconify:i,unit:t,totalValue:m,usedValue:d,appValue:p="0",usedPercent:r,appPercent:a,showAppUsage:o,appUnit:g="",tooltips:x}){const{t:n}=N(),[k,b]=l.useState(0),[w,u]=l.useState(0),V=U.colors.text.primary,j=U.colors.text.secondary;l.useEffect(()=>{b(0),u(0);let c;const h=500,T=P=>{c||(c=P);const C=P-c;C<h?(b(C/h*r),u(C/h*a),requestAnimationFrame(T)):(b(r),u(a))};requestAnimationFrame(T)},[r,a]);const B=c=>c>=90?{bg:"rgba(255, 77, 79, 0.1)",strokeColor:"#ff4d4f"}:c>=70?{bg:"rgba(250, 173, 20, 0.1)",strokeColor:"#faad14"}:c>=20?{bg:"rgba(24, 144, 255, 0.1)",strokeColor:"#1890ff"}:{bg:"rgba(82, 196, 26, 0.1)",strokeColor:"#52c41a"},S=(c,h=!1)=>c>=90?h?"#ff7875":"#ff4d4f":c>=70?h?"#ffc53d":"#faad14":c>=20?h?"#69c0ff":"#1890ff":h?"#95de64":"#52c41a",{bg:D}=B(r);return e.jsx(H,{className:"!p-0 !flex !items-stretch",children:e.jsxs("div",{className:"relative flex flex-col p-6 w-full",style:{background:D,color:V,minHeight:"120px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative",children:e.jsx(R,{icon:i,size:24})}),e.jsx("span",{className:"text-lg font-medium",children:s})]}),o&&(s===n("sys.workbench.memory")||s===n("sys.workbench.disk"))?e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx(f,{title:x?.app,children:e.jsxs("span",{className:"text-lg font-bold cursor-help",children:[p,e.jsx("span",{className:"text-xs font-normal ml-0.5",children:g})]})}),e.jsx(f,{title:x?.used,children:e.jsxs("span",{className:"text-sm cursor-help",style:{color:j},children:["(",d,e.jsx("span",{className:"text-xs ml-0.5",children:t}),")"]})}),e.jsx(f,{title:x?.total,children:e.jsxs("span",{className:"text-sm cursor-help",style:{color:j},children:["/ ",m,e.jsx("span",{className:"text-xs ml-0.5",children:t})]})})]}):e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:m}),e.jsx("span",{className:"text-sm",style:{color:j},children:t})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",style:{color:j},children:n("sys.workbench.usageRate")}),e.jsxs("span",{className:"text-sm font-medium",children:[e.jsx(f,{title:n("sys.workbench.appUsageRateTip",{value:a}),children:e.jsxs("span",{className:"text-blue-400 cursor-help",children:[a,"%"]})}),e.jsx("span",{className:"mx-1",style:{color:j},children:"/"}),e.jsx(f,{title:n("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsxs("span",{className:"cursor-help",style:{color:V},children:[r,"%"]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{title:n("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsx(A,{percent:k,showInfo:!1,strokeColor:S(r),size:{height:6},className:"!mb-0 cursor-help",trailColor:`rgba(${U.colors.palette.primary.defaultChannel}, 0.12)`})}),o&&e.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${a}%`},children:e.jsx(f,{title:n("sys.workbench.appUsageRateTip",{value:a}),children:e.jsx(A,{percent:w,showInfo:!1,strokeColor:S(a,!0),size:{height:6},className:"!mb-0 cursor-help",trailColor:"transparent"})})})]})]})]})})}export{Q as CPU,X as Disk,W as Memory};
