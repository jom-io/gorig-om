import{u as w,j as e,b as S}from"./index-DXkbx-7a.js";import{h as U,R as C}from"./resource-chart-Cv6yWCOp.js";import{C as A}from"./index-COXYmA4u.js";import{r as o}from"./vendor-core-Cler3e7Q.js";import{c as b,aa as V}from"./vendor-ui-BgnAtmuh.js";import"./vendor-utils-Dg5_7-NF.js";import"./useChart-ZRblDw9p.js";import"./vendor-charts-BXYW9_WM.js";function q(){const{t:s}=w(),[a,p]=o.useState(null),[u,i]=o.useState(!1);if(o.useEffect(()=>{U.getCachedUsage(1,1).then(t=>{t.items.length>0&&p(t.items[0])})},[]),!a)return e.jsx(g,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:8,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}});const n=Math.max(Number(a.appCpu),.01),r=Math.max(Number(a.cpu),.01);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>i(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:Number(a.cpuNum),usedValue:0,appValue:"0",usedPercent:Number.parseFloat(r.toFixed(2)),appPercent:Number.parseFloat(n.toFixed(2)),showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}})}),e.jsx(C,{open:u,onClose:()=>i(!1),resourceType:"cpu"})]})}function W(){const{t:s}=w(),[a,p]=o.useState(null),[u,i]=o.useState(!1);if(o.useEffect(()=>{U.getCachedUsage(1,1).then(x=>{x.items.length>0&&p(x.items[0])})},[]),!a)return e.jsx(g,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:16,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}});const n=Number(a.totalMem),r=Number(a.mem),t=Number(a.appMem),f=n/1024,y=r/1024,h=Math.max(t/n*100,.01),l=Math.max(r/n*100,.01),k=t>=1024?(t/1024).toFixed(1):t.toFixed(0),d=t>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>i(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(f.toFixed(1)),usedValue:Number.parseFloat(y.toFixed(1)),appValue:String(k),usedPercent:Number.parseFloat(l.toFixed(2)),appPercent:Number.parseFloat(h.toFixed(2)),showAppUsage:!0,appUnit:d,tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}})}),e.jsx(C,{open:u,onClose:()=>i(!1),resourceType:"memory"})]})}function $(){const{t:s}=w(),[a,p]=o.useState(null),[u,i]=o.useState(!1);if(o.useEffect(()=>{U.getCachedUsage(1,1).then(x=>{x.items.length>0&&p(x.items[0])})},[]),!a)return e.jsx(g,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:500,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}});const n=Number(a.totalDisk),r=Number(a.disk),t=Number(a.appDisk),f=n/1024,y=r/1024,h=Math.max(t/n*100,.01),l=Math.max(r/n*100,.01),k=t>=1024?(t/1024).toFixed(1):t.toFixed(0),d=t>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>i(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(f.toFixed(1)),usedValue:Number.parseFloat(y.toFixed(1)),appValue:String(k),usedPercent:Number.parseFloat(l.toFixed(2)),appPercent:Number.parseFloat(h.toFixed(2)),showAppUsage:!0,appUnit:d,tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}})}),e.jsx(C,{open:u,onClose:()=>i(!1),resourceType:"disk"})]})}function g({title:s,iconify:a,unit:p,totalValue:u,usedValue:i,appValue:n="0",usedPercent:r,appPercent:t,showAppUsage:f,appUnit:y="",tooltips:h}){const{t:l}=w(),[k,d]=o.useState(0),[x,j]=o.useState(0);o.useEffect(()=>{d(0),j(0);let c;const m=500,v=M=>{c||(c=M);const N=M-c;N<m?(d(N/m*r),j(N/m*t),requestAnimationFrame(v)):(d(r),j(t))};requestAnimationFrame(v)},[r,t]);const T=c=>c>=90?{bg:"rgba(255, 77, 79, 0.1)",strokeColor:"#ff4d4f"}:c>=70?{bg:"rgba(250, 173, 20, 0.1)",strokeColor:"#faad14"}:c>=20?{bg:"rgba(24, 144, 255, 0.1)",strokeColor:"#1890ff"}:{bg:"rgba(82, 196, 26, 0.1)",strokeColor:"#52c41a"},F=(c,m=!1)=>c>=90?m?"#ff7875":"#ff4d4f":c>=70?m?"#ffc53d":"#faad14":c>=20?m?"#69c0ff":"#1890ff":m?"#95de64":"#52c41a",{bg:P}=T(r);return e.jsx(A,{className:"!p-0 !flex !items-stretch",children:e.jsxs("div",{className:"relative flex flex-col p-6 w-full",style:{background:P,color:"#1f1f1f",minHeight:"120px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative",children:e.jsx(S,{icon:a,size:24})}),e.jsx("span",{className:"text-lg font-medium",children:s})]}),f&&(s===l("sys.workbench.memory")||s===l("sys.workbench.disk"))?e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx(b,{title:h?.app,children:e.jsxs("span",{className:"text-lg font-bold cursor-help",children:[n,e.jsx("span",{className:"text-xs font-normal ml-0.5",children:y})]})}),e.jsx(b,{title:h?.used,children:e.jsxs("span",{className:"text-sm text-gray-600 cursor-help",children:["(",i,e.jsx("span",{className:"text-xs ml-0.5",children:p}),")"]})}),e.jsx(b,{title:h?.total,children:e.jsxs("span",{className:"text-sm text-gray-600 cursor-help",children:["/ ",u,e.jsx("span",{className:"text-xs ml-0.5",children:p})]})})]}):e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:u}),e.jsx("span",{className:"text-sm text-gray-600",children:p})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:l("sys.workbench.usageRate")}),e.jsxs("span",{className:"text-sm font-medium",children:[e.jsx(b,{title:l("sys.workbench.appUsageRateTip",{value:t}),children:e.jsxs("span",{className:"text-blue-400 cursor-help",children:[t,"%"]})}),e.jsx("span",{className:"mx-1 text-gray-400",children:"/"}),e.jsx(b,{title:l("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsxs("span",{className:"text-gray-700 cursor-help",children:[r,"%"]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{title:l("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsx(V,{percent:k,showInfo:!1,strokeColor:F(r),strokeWidth:6,className:"!mb-0 cursor-help",trailColor:"rgba(0, 0, 0, 0.06)"})}),f&&e.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${t}%`},children:e.jsx(b,{title:l("sys.workbench.appUsageRateTip",{value:t}),children:e.jsx(V,{percent:x,showInfo:!1,strokeColor:F(t,!0),strokeWidth:6,className:"!mb-0 cursor-help",trailColor:"transparent"})})})]})]})]})})}export{q as CPU,$ as Disk,W as Memory};
