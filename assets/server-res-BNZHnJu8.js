import{u as j,a as U,j as e,b as A}from"./index-DGlVSG5J.js";import{h as C,R as F}from"./resource-chart-COq6XBXD.js";import{C as B}from"./index-sz1jIcZ1.js";import{r as n}from"./vendor-core-Cler3e7Q.js";import{c as f,aa as S}from"./vendor-ui-BgnAtmuh.js";import"./vendor-utils-Dg5_7-NF.js";import"./useChart-GbUKOF5b.js";import"./vendor-charts-BXYW9_WM.js";function W(){const{t:s}=j(),i=U(),[t,m]=n.useState(null),[d,u]=n.useState(!1);if(n.useEffect(()=>{i&&C.getCachedUsage(1,1).then(a=>{a.items.length>0&&m(a.items[0])})},[i]),!t)return e.jsx(g,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:8,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}});const r=Math.max(Number(t.appCpu),.01),o=Math.max(Number(t.cpu),.01);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>u(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.cpu"),iconify:"tabler:cpu",unit:s("sys.workbench.core"),totalValue:Number(t.cpuNum),usedValue:0,appValue:"0",usedPercent:Number.parseFloat(o.toFixed(2)),appPercent:Number.parseFloat(r.toFixed(2)),showAppUsage:!0,appUnit:"",tooltips:{app:s("sys.workbench.cpuAppUsage"),used:s("sys.workbench.cpuHostUsage"),total:s("sys.workbench.cpuTotal")}})}),e.jsx(F,{open:d,onClose:()=>u(!1),resourceType:"cpu"})]})}function $(){const{t:s}=j(),i=U(),[t,m]=n.useState(null),[d,u]=n.useState(!1);if(n.useEffect(()=>{i&&C.getCachedUsage(1,1).then(p=>{p.items.length>0&&m(p.items[0])})},[i]),!t)return e.jsx(g,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:16,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}});const r=Number(t.totalMem),o=Number(t.mem),a=Number(t.appMem),y=r/1024,x=o/1024,l=Math.max(a/r*100,.01),k=Math.max(o/r*100,.01),b=a>=1024?(a/1024).toFixed(1):a.toFixed(0),w=a>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>u(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.memory"),iconify:"bx:memory-card",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(y.toFixed(1)),usedValue:Number.parseFloat(x.toFixed(1)),appValue:String(b),usedPercent:Number.parseFloat(k.toFixed(2)),appPercent:Number.parseFloat(l.toFixed(2)),showAppUsage:!0,appUnit:w,tooltips:{app:s("sys.workbench.memoryAppUsage"),used:s("sys.workbench.memoryHostUsage"),total:s("sys.workbench.memoryTotal")}})}),e.jsx(F,{open:d,onClose:()=>u(!1),resourceType:"memory"})]})}function J(){const{t:s}=j(),i=U(),[t,m]=n.useState(null),[d,u]=n.useState(!1);if(n.useEffect(()=>{i&&C.getCachedUsage(1,1).then(p=>{p.items.length>0&&m(p.items[0])})},[i]),!t)return e.jsx(g,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:500,usedValue:0,appValue:"0",usedPercent:0,appPercent:0,showAppUsage:!0,appUnit:s("sys.workbench.mb"),tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}});const r=Number(t.totalDisk),o=Number(t.disk),a=Number(t.appDisk),y=r/1024,x=o/1024,l=Math.max(a/r*100,.01),k=Math.max(o/r*100,.01),b=a>=1024?(a/1024).toFixed(1):a.toFixed(0),w=a>=1024?s("sys.workbench.gb"):s("sys.workbench.mb");return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>u(!0),style:{cursor:"pointer"},children:e.jsx(g,{title:s("sys.workbench.disk"),iconify:"icon-park-solid:hard-disk-one",unit:s("sys.workbench.gb"),totalValue:Number.parseFloat(y.toFixed(1)),usedValue:Number.parseFloat(x.toFixed(1)),appValue:String(b),usedPercent:Number.parseFloat(k.toFixed(2)),appPercent:Number.parseFloat(l.toFixed(2)),showAppUsage:!0,appUnit:w,tooltips:{app:s("sys.workbench.diskAppUsage"),used:s("sys.workbench.diskHostUsage"),total:s("sys.workbench.diskTotal")}})}),e.jsx(F,{open:d,onClose:()=>u(!1),resourceType:"disk"})]})}function g({title:s,iconify:i,unit:t,totalValue:m,usedValue:d,appValue:u="0",usedPercent:r,appPercent:o,showAppUsage:a,appUnit:y="",tooltips:x}){const{t:l}=j(),[k,b]=n.useState(0),[w,p]=n.useState(0);n.useEffect(()=>{b(0),p(0);let c;const h=500,M=V=>{c||(c=V);const N=V-c;N<h?(b(N/h*r),p(N/h*o),requestAnimationFrame(M)):(b(r),p(o))};requestAnimationFrame(M)},[r,o]);const T=c=>c>=90?{bg:"rgba(255, 77, 79, 0.1)",strokeColor:"#ff4d4f"}:c>=70?{bg:"rgba(250, 173, 20, 0.1)",strokeColor:"#faad14"}:c>=20?{bg:"rgba(24, 144, 255, 0.1)",strokeColor:"#1890ff"}:{bg:"rgba(82, 196, 26, 0.1)",strokeColor:"#52c41a"},v=(c,h=!1)=>c>=90?h?"#ff7875":"#ff4d4f":c>=70?h?"#ffc53d":"#faad14":c>=20?h?"#69c0ff":"#1890ff":h?"#95de64":"#52c41a",{bg:P}=T(r);return e.jsx(B,{className:"!p-0 !flex !items-stretch",children:e.jsxs("div",{className:"relative flex flex-col p-6 w-full",style:{background:P,color:"#1f1f1f",minHeight:"120px"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative",children:e.jsx(A,{icon:i,size:24})}),e.jsx("span",{className:"text-lg font-medium",children:s})]}),a&&(s===l("sys.workbench.memory")||s===l("sys.workbench.disk"))?e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx(f,{title:x?.app,children:e.jsxs("span",{className:"text-lg font-bold cursor-help",children:[u,e.jsx("span",{className:"text-xs font-normal ml-0.5",children:y})]})}),e.jsx(f,{title:x?.used,children:e.jsxs("span",{className:"text-sm text-gray-600 cursor-help",children:["(",d,e.jsx("span",{className:"text-xs ml-0.5",children:t}),")"]})}),e.jsx(f,{title:x?.total,children:e.jsxs("span",{className:"text-sm text-gray-600 cursor-help",children:["/ ",m,e.jsx("span",{className:"text-xs ml-0.5",children:t})]})})]}):e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:m}),e.jsx("span",{className:"text-sm text-gray-600",children:t})]})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:l("sys.workbench.usageRate")}),e.jsxs("span",{className:"text-sm font-medium",children:[e.jsx(f,{title:l("sys.workbench.appUsageRateTip",{value:o}),children:e.jsxs("span",{className:"text-blue-400 cursor-help",children:[o,"%"]})}),e.jsx("span",{className:"mx-1 text-gray-400",children:"/"}),e.jsx(f,{title:l("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsxs("span",{className:"text-gray-700 cursor-help",children:[r,"%"]})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{title:l("sys.workbench.totalUsageRateTip",{value:r}),children:e.jsx(S,{percent:k,showInfo:!1,strokeColor:v(r),strokeWidth:6,className:"!mb-0 cursor-help",trailColor:"rgba(0, 0, 0, 0.06)"})}),a&&e.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${o}%`},children:e.jsx(f,{title:l("sys.workbench.appUsageRateTip",{value:o}),children:e.jsx(S,{percent:w,showInfo:!1,strokeColor:v(o,!0),strokeWidth:6,className:"!mb-0 cursor-help",trailColor:"transparent"})})})]})]})]})})}export{W as CPU,J as Disk,$ as Memory};
